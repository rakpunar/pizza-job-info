<html>
    <head>
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="0">
        <title>API Tracker</title>
    </head>
    <div id="container" style="width: 300px; position: fixed; right: 20px; top: 20px; font-family: Arial; color: white;">
        <div style="background: rgba(30,30,30,0.95); padding: 8px; border-radius: 5px 5px 0 0;">
            <span style="font-size: 12px; color: #999;">API DATA - USER 227724</span>
            <button onclick="refreshData()" style="float:right; background: none; border: none; color: white; cursor: pointer;">ðŸ”„</button>
        </div>

        <div style="background: rgba(30,30,30,0.95); padding: 10px; border-radius: 0 0 5px 5px;">
            <div style="margin-bottom: 15px;">
                <div style="color: #999; font-size: 12px;">OYUNCU DURUMU</div>
                <div id="playerStatus" style="font-size: 14px; margin-top: 3px;">YÃ¼kleniyor...</div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="color: #999; font-size: 12px;">GÃ–REV DETAYLARI</div>
                <div id="taskDetails" style="font-size: 14px; margin-top: 3px;">-</div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="color: #999; font-size: 12px;">KONUM</div>
                <div id="location" style="font-size: 14px; margin-top: 3px;">-</div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="color: #999; font-size: 12px;">PIZZA MALZEMELERÄ°</div>
                <div id="pizzaItems" style="font-size: 14px; margin-top: 3px;">YÃ¼kleniyor...</div>
            </div>

            <div>
                <div style="color: #999; font-size: 12px;">BAKÄ°YE</div>
                <div id="wealth" style="font-size: 14px; margin-top: 3px;">YÃ¼kleniyor...</div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'tycoon-2epova.users.cfx.re/status';
        const USER_ID = '227724';
        const API_KEY = 'MXmNGqARCoXgKgZOp7LO13omYG9D23tfkNVik';

        const PIZZA_ITEMS = [
            'Pizza', 'Fries', 'Soda', 'Expensive Water', 'Chicken Nuggets'
        ];

        async function fetchAPI(endpoint) {
            try {
                const response = await fetch(`https://${API_URL}${endpoint}`, {
                    headers: {'X-Tycoon-Key': API_KEY}
                });
                return await response.json();
            } catch (error) {
                console.error(`Hata: ${endpoint}`, error);
                return null;
            }
        }

        async function refreshData() {
            const [userData, mapData, wealthData] = await Promise.all([
                fetchAPI(`/dataadv/${USER_ID}`),
                fetchAPI('/map/positions.json'),
                fetchAPI(`/wealth/${USER_ID}`)
            ]);

            // Oyuncu durumu ve konum
            if (mapData?.players) {
                const player = mapData.players.find(p => p[2] == USER_ID);
                if (player) {
                    const status = `Ã‡evrimiÃ§i<br>Ä°ÅŸ: ${player[5]?.name || 'Yok'}<br>AraÃ§: ${player[4]?.vehicle_name || 'None'}`;
                    document.getElementById('playerStatus').innerHTML = status;

                    const pos = player[3];
                    const location = `X: ${Math.round(pos.x)}<br>Y: ${Math.round(pos.y)}<br>Z: ${Math.round(pos.z)}`;
                    document.getElementById('location').innerHTML = location;

                    // GÃ¶rev detaylarÄ±
                    if (player[5]?.name === 'Pizza Delivery') {
                        document.getElementById('taskDetails').innerHTML = 
                            `Aktif GÃ¶rev: Pizza Delivery<br>` +
                            `GÃ¶rev Durumu: ${player[5]?.state || 'Bilinmiyor'}`;
                    }
                }
            }

            // Pizza malzemeleri
            if (userData?.data?.inventory) {
                const pizzaHtml = PIZZA_ITEMS.map(item => {
                    const amount = userData.data.inventory[item]?.amount || 0;
                    return `<div style="display: flex; justify-content: space-between; padding: 2px 0;">
                        <span>${item}:</span>
                        <span>${amount}</span>
                    </div>`;
                }).join('');
                document.getElementById('pizzaItems').innerHTML = pizzaHtml;
            }

            // Bakiye
            if (wealthData) {
                const wealth = `CÃ¼zdan: $${wealthData.wallet?.toLocaleString() || 0}<br>
                               Banka: $${wealthData.bank?.toLocaleString() || 0}<br>
                               BorÃ§: $${wealthData.loan?.toLocaleString() || 0}`;
                document.getElementById('wealth').innerHTML = wealth;
            }
        }

        refreshData();
        setInterval(refreshData, 30000);
    </script>
</html>

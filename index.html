<!DOCTYPE html>
<html>
<head>
    <title>Basic Tracker</title>
    <style>
        body {
            font-family: Arial;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
        }
        .container {
            width: 300px;
            position: fixed;
            right: 20px;
            top: 20px;
        }
        .info-box {
            background: rgba(30,30,30,0.9);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .label { 
            color: #999;
            font-size: 12px; 
        }
        .value { 
            font-size: 16px;
            margin-top: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="info-box">
            <div class="label">OYUNCU BİLGİSİ</div>
            <div class="value" id="playerInfo">-</div>
        </div>

        <div class="info-box">
            <div class="label">KONUM</div>
            <div class="value" id="location">-</div>
        </div>

        <div class="info-box">
            <div class="label">BAKIYE</div>
            <div class="value" id="money">-</div>
        </div>
    </div>

    <script>
        const updateUI = (data) => {
            if (data.name) {
                document.getElementById('playerInfo').textContent = `${data.name} [ID: ${data.user_id || '-'}]`;
            }

            if (data.zoneName || data.street) {
                document.getElementById('location').textContent = 
                    `${data.zoneName || ''} ${data.street ? `- ${data.street}` : ''}`;
            }

            if (data.wallet !== undefined || data.bank !== undefined) {
                const wallet = data.wallet || 0;
                const bank = data.bank || 0;
                document.getElementById('money').textContent = 
                    `$${wallet.toLocaleString()} (Banka: $${bank.toLocaleString()})`;
            }
        };

        window.addEventListener('message', (event) => {
            const data = event.data.data;
            if (!data) return;
            updateUI(data);
        });

        // ESC ile kapat
        document.addEventListener('keyup', (event) => {
            if (event.key === 'Escape') {
                window.parent.postMessage({type: 'close'}, '*');
            }
        });

        // İlk veri isteği
        fetch('nui://game/getData', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({type: 'getData'})
        }).catch(console.error);
    </script>
</body>
</html>
